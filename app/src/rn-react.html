<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>菜鸟教程 React 实例</title>
    <script src="https://cdn.bootcss.com/react/15.4.2/react.min.js"></script>
    <script src="https://cdn.bootcss.com/react/15.4.2/react-dom.min.js"></script>
    <script src="https://cdn.bootcss.com/babel-standalone/6.22.1/babel.min.js"></script>

    <!--<script src = "./lib/babel.min.js" ></script>-->
    <!--<script src = "./lib/react-dom.min.js" ></script>-->
    <!--<script src = "./lib/babel.min.js" ></script>-->

    <style type="text/css">
        status {
            font-size: 12px;
            text-align: center;
            background-color: red;
        }

        input {
            width: 100%;
            box-sizing: border-box;
            line-height: 25px;
            margin: 5px 0;
        }

        button {
            display: block;
            width: 100%;
            box-sizing: border-box;
            margin: 20px 0;
        }
    </style>

</head>
<body>
<div id="example"></div>
<script type="text/babel">
    var HelloMessage = React.createClass({
        getInitialState: function() {
            return {value: 'Default text!'};
        },
        rnListener: function(e) {
            var value = document.getElementById("input").value;
//            alert('你好，我是一个弹框！'+value);
            window.postMessage(JSON.stringify({type:'Selete',value:(value&&value!=="")?value:this.state.value}));
        },

        render: function() {
            var value = this.state.value;
            return <div>
                <h1>Web Side:</h1>
                <p id="status">{value}</p>
                <input id="input" type="text" placeholder="Some..." />
                <button id="set"  onClick={this.rnListener.bind(this)}>Send To RN</button>
                <button id="get"  onClick={this.rnListener.bind(this)}>Get From RN (Auto)</button>
                <button id="get"  onClick={this.rnListener.bind(this)}>Get From RN (Manual)</button>
                <button id="get"  onClick={this.rnListener.bind(this)}>Nav To Another Page</button>
            </div>;
        }
    });

//    document.querySelector('.set').addEventListener('click', function(e){
//        document.getElementById("status").innerHTML = e.data;

//    });

    window.document.addEventListener('message',function(e){
        document.getElementById("status").innerHTML = e.data;
    });

    ReactDOM.render(
            <HelloMessage />,
            document.getElementById('example')
    );
</script>
</body>
</html>